# –°–µ–º–∏–Ω–∞—Ä ‚Ññ5 –ø–æ –°–î–ê - –°–≤—ä—Ä–∑–∞–Ω–∏ —Å–ø–∏—Å—ä—Ü–∏.

–í—Ä–µ–º–µ –µ –¥–∞ –ø—Ä–∏—Å—Ç—ä–ø–∏–º –∫—ä–º —Å—ä—â–∏–Ω—Å–∫–∞—Ç–∞ —á–∞—Å—Ç –Ω–∞ –∫—É—Ä—Å–∞, –∞ –∏–º–µ–Ω–Ω–æ –∫—ä–º —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ç–µ –æ—Ç –¥–∞–Ω–Ω–∏. 

–ö–∞–∫–≤–æ –±–µ—à–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç –¥–∞–Ω–Ω–∏? - –Ω–∞—á–∏–Ω –∑–∞ –ø–æ–¥—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ –¥–∞–Ω–Ω–∏—Ç–µ –≤ —É–¥–æ–±–µ–Ω –∑–∞ —É–ø–æ—Ç—Ä–µ–±–∞ —Ñ–æ—Ä–º–∞—Ç. 

–ö–∞–∫ —Å–º–µ —Å–≤–∏–∫–Ω–∞–ª–∏ –¥–∞ –ø–æ–¥—Ä–µ–∂–¥–∞–º–µ –¥–∞–Ω–Ω–∏—Ç–µ —Å–∏? –í –º–∞—Å–∏–≤–∏ - —Å—Ç–∞—Ç–∏—á–Ω–∏ (–∫–æ–≥–∞—Ç–æ –±—Ä–æ—è—Ç –∏–º –µ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª–Ω–æ
–∏–∑–≤–µ—Å—Ç–µ–Ω) –∏ –¥–∏–Ω–∞–º–∏—á–Ω–∏ (–∫–æ–≥–∞—Ç–æ –Ω–µ –∑–Ω–∞–µ–º –±—Ä–æ—è—Ç –∏–º). –ü–æ-—á–µ—Å—Ç–æ —Å—Ç–∏–≥–∞–º–µ –¥–æ —É–ø–æ—Ç—Ä–µ–±–∞—Ç–∞ –Ω–∞ –¥–∏–Ω–∞–º–∏—á–Ω–∏ –º–∞—Å–∏–≤–∏. –¢–µ –æ–±–∞—á–µ –∏–∑–∏—Å–∫–≤–∞—Ç –ø–æ–≤–µ—á–µ –º–µ–Ω–∏–∂–∏—Ä–∞–Ω–µ –Ω–∞ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–∞—Ç–∞ –ø–∞–º–µ—Ç. –ó–∞ –¥–∞ –Ω–µ –Ω–∏ —Å–µ –Ω–∞–ª–∞–≥–∞ 
–Ω–µ–ø—Ä–µ–∫—ä—Å–Ω–∞—Ç–æ –¥–∞ –º–∏—Å–ª–∏–º –∑–∞ –Ω–µ—è, –≤–∏–Ω–∞–≥–∏ –º–æ–∂–µ–º –¥–∞ —Å–∏ –æ–±–≤–∏–µ–º –¥–∏–Ω–∞–º–∏—á–Ω–æ—Ç–æ –º–∞—Å–∏–≤—á–µ –≤ –∫–ª–∞—Å. –ï, —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ —Ç–æ–≤–∞ —Å–µ —Å–ª—É—á–≤–∞ –≤ –¥–æ–±—Ä–µ –ø–æ–∑–Ω–∞—Ç–∞—Ç–∞ –Ω–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç –¥–∞–Ω–Ω–∏, –∞ –∏–º–µ–Ω–Ω–æ - –≤–µ–∫—Ç–æ—Ä. 

## `std::vector`
–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏—è—Ç –≤–µ–∫—Ç–æ—Ä –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–≤–∞ "–æ–±–≤–∏—Ç" –≤ –∫–ª–∞—Å –¥–∏–Ω–∞–º–∏—á–µ–Ω –º–∞—Å–∏–≤, –∫–æ–π—Ç–æ —Å–∞–º —Å–µ –≥—Ä–∏–∂–∏ –∑–∞ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–∞—Ç–∞ –æ—Ç –Ω–µ–≥–æ –ø–∞–º–µ—Ç - –∑–∞–¥–µ–ª—è —è –∏ —è –∏–∑—Ç—Ä–∏–≤–∞, –∫–æ–≥–∞—Ç–æ –µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ. 

> [!IMPORTANT]
> –ó–∞–¥–µ–ª—è–Ω–µ—Ç–æ –Ω–∞ —Å–∞–º–∞—Ç–∞ –ø–∞–º–µ—Ç —Å—Ç–∞–≤–∞ —á—Ä–µ–∑ `operator new`, 
> –∞ –∫–æ–Ω—Å—Ç—Ä—É–∏—Ä–∞–Ω–µ—Ç–æ –Ω–∞ —Å–∞–º–∏—Ç–µ –æ–±–µ–∫—Ç–∏ - —á—Ä–µ–∑ `placement new` –≤—ä—Ä—Ö—É –≤–µ—á–µ –∑–∞–¥–µ–ª–µ–Ω–∞—Ç–∞ –ø–∞–º–µ—Ç. –ò–∑—Ç—Ä–∏–≤–∞–Ω–µ—Ç–æ –Ω–∞ —Å–∞–º–∏—Ç–µ –æ–±–µ–∫—Ç–∏ —Å—Ç–∞–≤–∞ —á—Ä–µ–∑ –∏–∑–≤–∏–∫–≤–∞–Ω–µ—Ç–æ –Ω–∞ —Ç–µ—Ö–Ω–∏—Ç–µ **–¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä–∏**, –∞ —Å–∞–º–∞—Ç–∞ –ø–∞–º–µ—Ç —Å–µ 
> –∏–∑—Ç—Ä–∏–≤–∞ —Å `operator delete`.

```c++
template<class T>
class vector
{
private:
	T* _data;
	size_t _size;
	size_t _capacity;
	static const int RESIZE_FACTOR = 2;

public:
    //methods
};
```

–ù–µ–∫–∞ —Ä–∞–∑–≥–ª–µ–¥–∞–º–µ –µ–¥–∏–Ω –æ—Ç –æ—Å–Ω–æ–≤–Ω–∏—Ç–µ –º—É –º–µ—Ç–æ–¥–∏ - `push_back()`. 
```c++
template <class T>
void vector<T>::push_back(const T& value)
{
	if (_capacity == _size)
		reserve(_capacity * GROWTH_FACTOR);

	new(_data[size++]) T(value);
}

```

–ö–∞–∫—Ç–æ –º–æ–∂–µ–º –¥–∞ –≤–∏–¥–∏–º, –≤ –ø–æ–≤–µ—á–µ—Ç–æ —Å–ª—É—á–∞–∏ —Å–ª–æ–∂–Ω–æ—Å—Ç—Ç–∞ –Ω–∞ –º–µ—Ç–æ–¥–∞ –Ω–∏ –µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–Ω–∞ - –∏–∑–≤—ä—Ä—à–≤–∞–º–µ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –∑–∞–¥–µ–ª—è–Ω–µ –Ω–∞ –ø–∞–º–µ—Ç. –ù–æ –∫–æ–≥–∞—Ç–æ `_size` –Ω–∏ —Å—Ç–∞–Ω–µ —Ä–∞–≤–Ω–æ –Ω–∞ `_capacity`, –≤–µ–∫—Ç–æ—Ä—ä—Ç —É–≤–µ–ª–∏—á–∞–≤–∞ –∑–∞–¥–µ–ª–µ–Ω–∞—Ç–∞ –æ—Ç –Ω–µ–≥–æ –ø–∞–º–µ—Ç, –≤ –∫–æ—è—Ç–æ –ø–∞–∑–∏ –¥–∞–Ω–Ω–∏—Ç–µ. –¢–æ–≤–∞ —Å—Ç–∞–≤–∞ —á—Ä–µ–∑ –º–µ—Ç–æ–¥–∞ `reserve` :
```c++
template <class T>
void vector<T>::reserve(size_t n)
{
	if (n <= _capacity)
		return;

	T* new_data = static_cast<T*>(operator new(n * sizeof(T)));

	for (size_t i = 0; i < _size; i++)
		new (&new_data[i]) T(std::move(_data[i]));

	operator delete(_data, capacity() * sizeof(T));

	_data = new_data;
	_capacity = n;
}
```

 –¢–æ–∑–∏ –º–µ—Ç–æ–¥ –∏–º–∞ –ª–∏–Ω–µ–π–Ω–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç. –°—ä–æ—Ç–≤–µ—Ç–Ω–æ –æ—Ç –≤—Ä–µ–º–µ –Ω–∞ –≤—Ä–µ–º–µ —â–µ –Ω–∏ —Å–µ –Ω–∞–ª–∞–≥–∞ –¥–∞ –∏–∑–≤—ä—Ä—à–≤–∞–º–µ –æ–ø–µ—Ä–∞—Ü–∏—è—Ç–∞ `push_back` –Ω–µ –≤ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–Ω–æ, –∞ –≤ –ª–∏–Ω–µ–π–Ω–æ –≤—Ä–µ–º–µ. –û—Ç—Ç–∞–º –∏–¥–≤–∞ –∞–º–æ—Ä—Ç–∏–∑–∏—Ä–∞–Ω–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç –Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏—è—Ç–∞ - –û(1), –∑–∞—â–æ—Ç–æ –≤—Å–µ –ø–æ-—Ä—è–¥–∫–æ —â–µ –Ω–∏ —Å–µ –Ω–∞–ª–∞–≥–∞ –¥–∞ –ø—Ä–∞–≤–∏–º reserve —Å –Ω–∞—Ä–∞—Å—Ç–≤–∞–Ω–µ—Ç–æ –Ω–∞ –æ–±–µ–º–∞ –Ω–∞ –¥–∞–Ω–Ω–∏—Ç–µ. –ò –≤—Å–µ –ø–∞–∫, –∫–æ–≥–∞—Ç–æ –Ω–∏ —Å–µ –Ω–∞–ª–æ–∂–∏, —â–µ –∏–º–∞–º–µ —Å–ª–æ–∂–Ω–æ—Å—Ç O(n) - –Ω–∞—à–∏—è worst-case.

 –ù–µ–∫–∞ —Å–µ–≥–∞ —Ä–∞–∑–≥–ª–µ–¥–∞–º–µ –æ—â–µ –µ–¥–Ω–∞ –æ—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏—Ç–µ, –∞ –∏–º–µ–Ω–Ω–æ - `insert`:
 ```c++
template <class T>
void vector<T>::insert(const iterator<T>& pos, const T& el)
{
	int pos_offs = pos - begin();
	if (pos_offs >= _size)
		throw std::out_of_range("Iterator out of bounds");

	if (_size == _capacity)
		reserve(_capacity * GROWTH_FACTOR);

	_size++;

	for (size_t i = _size - 1; i > pos_offs; i--)
	{
		new (&_data[i]) T(std::move(_data[i - 1]));
		_data[i - 1].~T();
	}

	new (&_data[pos_offs]) T(el);
}
```
–ö–∞–∫—Ç–æ –∑–∞–±–µ–ª—è–∑–≤–∞–º–µ, –º–µ—Ç–æ–¥–∞ –Ω–∏ –Ω–∞–º–∏—Ä–∞ –ø–æ–∑–∏—Ü–∏—è—Ç–∞, –Ω–∞ –∫–æ—è—Ç–æ —Ç—Ä—è–±–≤–∞ –¥–∞ –ø–æ—Å—Ç–∞–≤–∏–º –¥–∞–¥–µ–Ω–∏—è –µ–ª–µ–º–µ–Ω—Ç, –∏ shift-–≤–∞ –≤—Å–∏—á–∫–∏ –µ–ª–µ–º–µ–Ω—Ç–∏, —Å—Ç–æ—è—â–∏ –≤–¥—è—Å–Ω–æ –æ—Ç –Ω–µ–≥–æ, —Å 1 –ø–æ–∑–∏—Ü–∏—è (—Ä–µ—Å–ø–µ–∫—Ç–∏–≤–Ω–æ —Å –±—Ä–æ–π –ø–æ–∑–∏—Ü–∏–∏, —Ä–∞–≤–µ–Ω –Ω–∞ –±—Ä–æ—è –Ω–∞ –≤–º—ä–∫–≤–∞–Ω–∏—Ç–µ –µ–ª–µ–º–µ–Ω—Ç–∏, –∞–∫–æ —Å—Ç–∞–≤–∞ –¥—É–º–∞ –∑–∞ range insertion). –°—ä–æ—Ç–≤–µ—Ç–Ω–æ —Ç—É–∫ —Å–ª–æ–∂–Ω–æ—Å—Ç—Ç–∞ –Ω–∞ –º–µ—Ç–æ–¥–∞ –Ω–∏ –µ –ª–∏–Ω–µ–π–Ω–∞ –ø–æ –±—Ä–æ—è –Ω–∞ –æ—Ç–º–µ—Å—Ç–≤–∞–Ω–∏—è—Ç–∞. 

–ó–∞ –º–µ—Ç–æ–¥–∞ `erase` –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –æ—Ç–Ω–æ–≤–æ –º–æ–∂–µ–º –¥–∞ –æ–ø—Ä–µ–¥–µ–ª–∏–º, —á–µ —Å–ª–æ–∂–Ω–æ—Å—Ç—Ç–∞ –Ω–∏ –µ –ª–∏–Ω–µ–π–Ω–∞ –ø–æ –±—Ä–æ—è –Ω–∞ –æ—Ç–º–µ—Å—Ç–≤–∞–Ω–∏—è—Ç–∞ + –±—Ä–æ—è –Ω–∞ –∏–∑—Ç—Ä–∏—Ç–∏—Ç–µ –µ–ª–µ–º–µ–Ω—Ç–∏:
```c++
template <class T>
void vector<T>::erase(const iterator<T>& first, const iterator<T>& last)
{
	int deleted_count = last - first;
	if (deleted_count <= 0)
		return;

	int begin_offs = first - begin();
	int end_offs = last - begin();

	if (last != end())
	{
		for (size_t i = end_offs; i < _size; i++)
			new (&_data[begin_offs++]) T(std::move(_data[i]));
	}

	for (size_t i = end_offs; i < _size; i++)
		_data[i].~T();

	_size -= deleted_count;
}
```

–ö–æ–≥–∞—Ç–æ –≤ –¥–∞–¥–µ–Ω–∞ —Å–∏—Ç—É–∞—Ü–∏—è –Ω–∏ —Å–µ –Ω–∞–ª–∞–≥–∞ –¥–∞ –ø—Ä–∞–≤–∏–º –º–Ω–æ–∂–µ—Å—Ç–≤–æ `insert` –∏ `erase` –æ–ø–µ—Ä–∞—Ü–∏–∏, —Ç–æ –º–æ–∂–µ–º –¥–∞ —Å–∏ –∑–∞–¥–∞–¥–µ–º –≤—ä–ø—Ä–æ—Å–∞ - —Ç–æ–≤–∞ –ª–∏ –µ –Ω–∞–π-–ø–æ–¥—Ö–æ–¥—è—â–∞—Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç –¥–∞–Ω–Ω–∏, –∫–æ—è—Ç–æ –º–æ–≥–∞ –¥–∞ –∏–∑–ø–æ–ª–∑–≤–∞–º? 

–ê–º–∏ –Ω–µ–∫–∞ —Ä–∞–∑–≥–ª–µ–¥–∞–º–µ –æ—â–µ –µ–¥–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç –¥–∞–Ω–Ω–∏ - —Å–≤—ä—Ä–∑–∞–Ω —Å–ø–∏—Å—ä–∫. 

–°–≤—ä—Ä–∑–∞–Ω–∏—è—Ç —Å–ø–∏—Å—ä–∫ —Å–µ –¥–µ–ª–∏ –Ω–∞ –¥–≤–∞ –≤–∏–¥–∞ - singly linked list –∏–ª–∏ –µ–¥–Ω–æ—Å–≤—ä—Ä–∑–∞–Ω —Å–ø–∏—Å—ä–∫, –∏ doubly linked list –∏–ª–∏ –¥–≤—É—Å–≤—ä—Ä–∑–∞–Ω. 

## –ï–¥–Ω–æ—Å–≤—ä—Ä–∑–∞–Ω —Å–ø–∏—Å—ä–∫
<img width="398" alt="image" src="https://github.com/user-attachments/assets/d73608d7-edaf-485f-9c0f-57ff8f495cda">

–ï–¥–Ω–æ—Å–≤—ä—Ä–∑–∞–Ω–∏—è—Ç —Å–ø–∏—Å—ä–∫ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–≤–∞ —Ç–µ–º–ø–ª–µ–π—Ç–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç –¥–∞–Ω–Ω–∏, –≤ –∫–æ—è—Ç–æ –µ–ª–µ–º–µ–Ω—Ç–∏—Ç–µ —Å–∞ —Ç.–Ω–∞—Ä. Nodes –∏–ª–∏ –≤—ä–∑–ª–∏. –í—Å–µ–∫–∏ –≤—ä–∑–µ–ª –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–≤–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∫–∞, –∫–æ—è—Ç–æ –∏–º–∞ —É–∫–∞–∑–∞—Ç–µ–ª –∫—ä–º —Å–ª–µ–¥–≤–∞—â–∏—è –µ–ª–µ–º–µ–Ω—Ç –∏ —Å—ä–¥—ä—Ä–∂–∞ –≤ —Å–µ–±–µ —Å–∏ –µ–¥–Ω–æ –ø–æ–ª–µ–Ω—Ü–µ –¥–∞–Ω–Ω–∏ –æ—Ç —Ç–∏–ø–∞ –Ω–∞ —Ç–µ–º–ø–ª–µ–π—Ç–∞. –ù–µ–∫–∞ –ø–æ–≥–ª–µ–¥–Ω–µ–º –Ω–∞–±—ä—Ä–∑–æ –∫–∞–∫ –±–∏ –∏–∑–≥–ª–µ–∂–¥–∞–ª –µ–¥–∏–Ω Node:
```c++
template <class T>
struct node
{
	node<T>* _next;
	T _value;

	node() : _next{ nullptr }, _value() {};
	node(const T& value) : _value(value), _next{ nullptr } {};
	node(T&& value) : _value(std::move(value)), _next{ nullptr } {};

	template <class ...Args>
	node(Args ...args) : _next{ nullptr }, _value(std::forward<Args>(args)...) {}
};
```

–ó–∞—Å–µ–≥–∞ –Ω–µ –æ–±—Ä—ä—â–∞–π—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∏—Ç–µ - —Ç–µ —â–µ –Ω–∏ —Ç—Ä—è–±–≤–∞—Ç, –∫–æ–≥–∞—Ç–æ —Ä–∞–∑–≥–ª–µ–¥–∞–º–µ —Ü—è–ª–∞—Ç–∞ –∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞ –µ–¥–Ω–æ—Å–≤—ä—Ä–∑–∞–Ω–∏—è —Å–ø–∏—Å—ä–∫. 

–ù–∞ –ø—ä—Ä–≤–æ –º—è—Å—Ç–æ –∫–∞–∫–≤–æ –Ω–∏ –ø–æ–∫–∞–∑–≤–∞ —Ç–æ–≤–∞? –ó–∞ —Ä–∞–∑–ª–∏–∫–∞ –æ—Ç –≤–µ–∫—Ç–æ—Ä–∞, —Ç—É–∫ –ª–∏–ø—Å–≤–∞ ***locality***, —Ç.–µ. –µ–ª–µ–º–µ–Ω—Ç–∏—Ç–µ –Ω–µ —Å–∞ —Ä–∞–∑–ø–æ–ª–æ–∂–µ–Ω–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª–Ω–æ. –ê–¥—Ä–µ—Å–∏—Ç–µ —Å–∞ —Ä–∞–∑–ø–æ–ª–æ–∂–µ–Ω–∏ —Å–ª—É—á–∞–π–Ω–æ –∏–∑ –ø–∞–º–µ—Ç—Ç–∞ –∏ –ø—Ä–æ—Å—Ç–æ –≤—Å–µ–∫–∏ –µ–ª–µ–º–µ–Ω—Ç –∑–Ω–∞–µ –∫—ä–¥–µ —Å–µ –Ω–∞–º–∏—Ä–∞ —Ç–æ–∑–∏ —Å–ª–µ–¥ –Ω–µ–≥–æ. 

–ü—Ä–µ–¥—Å—Ç–∞–≤–µ—Ç–µ —Å–∏, —á–µ –æ–±–∏–∫–∞–ª—è—Ç–µ —Å—Ç–∞–∏ –∏ –≤—ä–≤ –≤—Å—è–∫–∞ —Å—Ç–∞—è –∏–º–∞—Ç–µ –ª–∏—Å—Ç—á–µ, –Ω–∞ –∫–æ–µ—Ç–æ –ø–∏—à–µ –∫–æ—è –µ —Å–ª–µ–¥–≤–∞—â–∞—Ç–∞ —Å—Ç–∞—è, –≤ –∫–æ—è—Ç–æ —Ç—Ä—è–±–≤–∞ –¥–∞ –æ—Ç–∏–¥–µ—Ç–µ, –∫–∞—Ç–æ –Ω—è–º–∞—Ç–µ –ø—Ä–∞–≤–æ –¥–∞ —Å–µ –≤—Ä—ä—â–∞—Ç–µ –≤ –ø—Ä–µ–¥–∏—à–Ω–∞—Ç–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–ø–æ—á–≤–∞—Ç–µ –æ—Ç —Å—Ç–∞—è ‚Ññ01, –≤ –Ω–µ—è –Ω–∞–º–∏—Ä–∞—Ç–µ –ª–∏—Å—Ç—á–µ, –Ω–∞ –∫–æ–µ—Ç–æ –ø–∏—à–µ "—Å—Ç–∞—è ‚Ññ325", –≤ 325 –∏–º–∞ –ª–∏—Å—Ç—á–µ —Å –Ω–∞–¥–ø–∏—Å "—Å—Ç–∞—è ‚Ññ200" –∏ –≤ 200 –≤–µ—á–µ –Ω—è–º–∞ –ª–∏—Å—Ç—á–µ. –¢–∞–∑–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª–Ω–æ—Å—Ç –æ—Ç —Å—Ç–∞–∏ –æ–ø–∏—Å–≤–∞ —Ç–æ—á–Ω–æ –µ–¥–∏–Ω –µ–¥–Ω–æ—Å–≤—ä—Ä–∑–∞–Ω —Å–ø–∏—Å—ä–∫: 01 -> 325 -> 200. 

–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—Ç–∞ –∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞ —Å–≤—ä—Ä–∑–∞–Ω–∏—è —Å–ø–∏—Å—ä–∫ (`std::forward_list`) —Å—ä–¥—ä—Ä–∂–∞ –≤ —Å–µ–±–µ —Å–∏ –¥–≤–∞ —É–∫–∞–∑–∞—Ç–µ–ª—è - –∫—ä–º –ø—ä—Ä–≤–∏—è (head-—É–∫–∞–∑–∞—Ç–µ–ª) –∏ –∫—ä–º –ø–æ—Å–ª–µ–¥–Ω–∏—è –µ–ª–µ–º–µ–Ω—Ç (tail-—É–∫–∞–∑–∞—Ç–µ–ª) –Ω–∞ –∫–æ–ª–µ–∫—Ü–∏—è—Ç–∞ –æ—Ç –¥–∞–Ω–Ω–∏. –°—ä–æ—Ç–≤–µ—Ç–Ω–æ –∫–∞—Ç–æ –¥–æ–±–∞–≤—è–º–µ –µ–ª–µ–º–µ–Ω—Ç –≤ –Ω–∞—á–∞–ª–æ—Ç–æ –Ω–∞ –∫–æ–ª–µ–∫—Ü–∏—è—Ç–∞, –Ω–∏–µ –ø—Ä–æ—Å—Ç–æ —Ç—Ä—è–±–≤–∞ –¥–∞ "–∑–∞–∫–∞—á–∏–º" –Ω–µ–≥–æ–≤–∏—è next-—É–∫–∞–∑–∞—Ç–µ–ª –∑–∞ –ø—ä—Ä–≤–∏—è –µ–ª–µ–º–µ–Ω—Ç (head). –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ, –∫–æ–≥–∞—Ç–æ –¥–æ–±–∞–≤—è–º–µ –µ–ª–µ–º–µ–Ω—Ç –≤ –∫—Ä–∞—è –Ω–∞ –∫–æ–ª–µ–∫—Ü–∏—è—Ç–∞, —Ç—Ä—è–±–≤–∞ –¥–∞ –∑–∞–∫–∞—á–∏–º next-—É–∫–∞–∑–∞—Ç–µ–ª—è –Ω–∞ tail-a –∑–∞ –Ω–µ–≥–æ. –ö–∞–∫—Ç–æ –º–æ–∂–µ –±–∏ –≤–µ—á–µ —Å–µ –¥–æ—Å–µ—â–∞—Ç–µ, —Ç–æ–≤–∞ —Å—Ç–∞–≤–∞ –∑–∞ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–Ω–æ –≤—Ä–µ–º–µ - –≤–∏–Ω–∞–≥–∏ –∏–∑–≤—ä—Ä—à–≤–∞–º–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–µ–Ω –±—Ä–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏. –¢–∞–∑–∏ —Å–ª–æ–∂–Ω–æ—Å—Ç –Ω–∏ –ø–æ–∑–≤–æ–ª—è–≤–∞ –≤–∏–Ω–∞–≥–∏ –¥–∞ –ø–∞–∑–∏–º —Ç–æ—á–Ω–æ—Ç–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞–º–µ—Ç, –∫–æ–µ—Ç–æ –Ω–∏ –µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ, –∏ –¥–∞ –Ω—è–º–∞–º–µ –Ω—É–∂–¥–∞ –æ—Ç reserve –∏–ª–∏ resize –º–µ—Ç–æ–¥–∏. 

–ö–æ–≥–∞—Ç–æ —Å—Ç–∞–≤–∞ –¥—É–º–∞ –∑–∞ –¥–æ–±–∞–≤—è–Ω–µ –Ω–∞ –µ–ª–µ–º–µ–Ω—Ç –Ω–∞ –¥–∞–¥–µ–Ω–∞ –ø–æ–∑–∏—Ü–∏—è, –∏–º–∞ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–∞–ª–∏ –∏—Å–∫–∞–º–µ –¥–∞ –≥–æ insert-–Ω–µ–º –ø—Ä–µ–¥–∏ –ø–æ–∑–∏—Ü–∏—è—Ç–∞, –∏–ª–∏ —Å–ª–µ–¥ –Ω–µ—è. –ó–∞ –¥–∞ –≤–º—ä–∫–Ω–µ–º –µ–ª–µ–º–µ–Ω—Ç –º–µ–∂–¥—É –¥–≤–∞ –¥—Ä—É–≥–∏, –Ω–∏–µ —Ç—Ä—è–±–≤–∞ –¥–∞ —Ä–∞–∑–∫–∞—á–∏–º –ª–µ–≤–∏—è –æ—Ç –¥–µ—Å–Ω–∏—è, –¥–∞ –∑–∞–∫–∞—á–∏–º –ª–µ–≤–∏—è –∑–∞ –µ–ª–µ–º–µ–Ω—Ç–∞ –∏ –¥–∞ –∑–∞–∫–∞—á–∏–º –µ–ª–µ–º–µ–Ω—Ç–∞ –∑–∞ –¥–µ—Å–Ω–∏—è. Insert –ø—Ä–µ–¥–∏ –ø–æ–∑–∏—Ü–∏—è—Ç–∞ —â–µ –∏–∑–∏—Å–∫–≤–∞ –¥–∞ —Å—Ç–∏–≥–Ω–µ–º –¥–æ –ø—Ä–µ–¥—Ö–æ–¥–Ω–∏—è –µ–ª–µ–º–µ–Ω—Ç, –∫–æ–µ—Ç–æ —â–µ –Ω–∞–ª–æ–∂–∏ –æ–±—Ö–æ–∂–¥–∞–Ω–µ –Ω–∞ –µ–ª–µ–º–µ–Ω—Ç–∏—Ç–µ –æ—Ç –ø—ä—Ä–≤–∏—è –Ω–∞—Ç–∞–º. –ö–∞–∫—Ç–æ —Å–µ –¥–æ—Å–µ—â–∞–º–µ, —Ç–æ–≤–∞ —â–µ —Å—Ç–∞–Ω–µ –≤ –ª–∏–Ω–µ–π–Ω–æ –≤—Ä–µ–º–µ. –ó–∞—Ç–æ–≤–∞ –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—Ç–∞ –∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞ —Å–ø–∏—Å—ä–∫–∞ –∏–º–∞–º–µ –º–µ—Ç–æ–¥ —Å–∞–º–æ –∑–∞ –≤–º—ä–∫–≤–∞–Ω–µ –Ω–∞ –µ–ª–µ–º–µ–Ω—Ç–∞ —Å–ª–µ–¥ –ø–æ–¥–∞–¥–µ–Ω–∞—Ç–∞ –Ω–∏ –ø–æ–∑–∏—Ü–∏—è, —Ç.–µ. –∏–º–∞–º–µ `insert_after`, –∫–æ–π—Ç–æ —Å–µ –∏–∑–≤—ä—Ä—à–≤–∞ –≤ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–Ω–æ (–û(1)) –≤—Ä–µ–º–µ:
```c++
template <class T>
iterator<T> forward_list<T>::insert_after(const iterator<T>& pos, const T& el)
{
	if (!pos._node_ptr)
		throw std::invalid_argument("Node ptr is null");

	if (pos == c_before_begin())
	{
		push_front(el);
		return _head;
	}

	node<T>* to_insert = new node<T>(el);
	node<T>* temp = pos._node_ptr->_next;
	pos._node_ptr->_next = to_insert;
	to_insert->_next = temp;

	if (!temp)
		_tail = to_insert;
	
	return pos;
}
```

–¢—É–∫ –∏–º–∞–º–µ –∏ –¥—Ä—É–≥ –∏–Ω—Ç–µ—Ä–µ—Å–µ–Ω –º–µ—Ç–æ–¥, –∫–æ–π—Ç–æ –Ω–∏ –ø–æ–∑–≤–æ–ª—è–≤–∞ –¥–∞ –≤–º—ä–∫–Ω–µ–º –¥—Ä—É–≥ —Å–≤—ä—Ä–∑–∞–Ω —Å–ø–∏—Å—ä–∫ –Ω–∞ –¥–∞–¥–µ–Ω–∞ –ø–æ–∑–∏—Ü–∏—è –≤ –Ω–∞—à–∏—è –∏ —Ç–æ –æ—Ç–Ω–æ–≤–æ –∑–∞ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–Ω–æ –≤—Ä–µ–º–µ. –¢–æ–≤–∞ —Å—Ç–∞–≤–∞ —á—Ä–µ–∑ –º–µ—Ç–æ–¥–∞ `splice_after`:
```c++
// Moves elements from another forward_list to *this. The elements are inserted after the element pointed to by pos
template <class T>
void forward_list<T>::splice_after(const iterator<T>& pos, forward_list<T>& other)
{
	if (!pos._node_ptr || !other._head)
		return;

	auto temp = pos._node_ptr->_next;
	pos._node_ptr->_next = other._head;
	other._tail->_next = temp;

	if (pos == c_before_begin())
		_head = other._head;

	if (!temp)
		_tail = other._tail;

	other._head = other._tail = nullptr;
	other._before_head->_next = nullptr;
}
```
–ö–∞–∫—Ç–æ –º–æ–∂–µ–º –¥–∞ –≤–∏–¥–∏–º, —Ç—É–∫ –ø—Ä–æ—Å—Ç–æ "–∑–∞–∫–∞—á–∞–º–µ" —Å–ø–∏—Å—ä–∫–∞ —Å–ª–µ–¥ node-a –Ω–∞ –ø–æ–¥–∞–¥–µ–Ω–∞—Ç–∞ –ø–æ–∑–∏—Ü–∏—è, –∞ "–æ–ø–∞—à–∫–∞—Ç–∞" –º—É –∑–∞–∫–∞—á–∞–º–µ –∑–∞ —Å–ª–µ–¥–≤–∞—â–∏—è –µ–ª–µ–º–µ–Ω—Ç –æ—Ç –Ω–∞—à–∏—è —Å–ø–∏—Å—ä–∫ (—Ç–æ–∑–∏ —Å–ª–µ–¥ –µ–ª–µ–º–µ–Ω—Ç–∞ –Ω–∞ –ø–æ–∑–∏—Ü–∏—è pos).  

–ü—Ä–µ–º–∞—Ö–≤–∞–Ω–µ—Ç–æ –Ω–∞ –µ–ª–µ–º–µ–Ω—Ç –æ—Ç –¥–∞–¥–µ–Ω–∞ –ø–æ–∑–∏—Ü–∏—è —Å–µ —Å–ª—É—á–≤–∞ –≤ –ª–∏–Ω–µ–π–Ω–æ –≤—Ä–µ–º–µ –≤ –æ–±—â–∏—è —Å–ª—É—á–∞–π –æ—Ç–Ω–æ–≤–æ –ø–æ —Å—ä—â–∏—Ç–µ –ø—Ä–∏—á–∏–Ω–∏, –ø–æ—Ä–∞–¥–∏ –∫–æ–∏—Ç–æ –≤–º—ä–∫–≤–∞–Ω–µ—Ç–æ –µ –ª–∏–Ω–µ–π–Ω–æ. –ó–∞—Ç–æ–≤–∞ —Ç—É–∫ –∏–º–∞–º–µ –º–µ—Ç–æ–¥ `erase_after()`, –∫–æ–π—Ç–æ –Ω–∏ –ø–æ–∑–≤–æ–ª—è–≤–∞ –¥–∞ –∏–∑—Ç—Ä–∏–µ–º –µ–ª–µ–º–µ–Ω—Ç —Å–ª–µ–¥ –¥–∞–¥–µ–Ω–∞ –ø–æ–∑–∏—Ü–∏—è –≤ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–Ω–æ –≤—Ä–µ–º–µ:
```c++
template <class T>
iterator<T> forward_list<T>::erase_after(const iterator<T>& pos)
{
	if (!pos._node_ptr)
		throw std::invalid_argument("Node ptr is null");

	if (pos == c_before_begin())
	{
		pop_front();
		return _head;
	}

	node<T>* to_erase = pos._node_ptr->_next;
	if (to_erase)
	{
		if (!to_erase->_next) //to_erase is tail
		{
			pos._node_ptr->_next = to_erase->_next;
			delete to_erase;
			_tail = pos._node_ptr;
			return end();
		}
		else
		{
			pos._node_ptr->_next = to_erase->_next;
			delete to_erase;
			return pos._node_ptr->_next;
		}
	}

	return end();
}
```

–°—ä–æ—Ç–≤–µ—Ç–Ω–æ –∫–æ–≥–∞—Ç–æ —â–µ –ø—Ä–∞–≤–∏–º –º–Ω–æ–∂–µ—Å—Ç–≤–æ –¥–æ–±–∞–≤—è–Ω–∏—è –∏ –ø—Ä–µ–º–∞—Ö–≤–∞–Ω–∏—è –Ω–∞ –µ–ª–µ–º–µ–Ω—Ç–∏ –∏ locality-—Ç–æ –Ω–µ –Ω–∏ –µ –æ—Ç –∂–∏–∑–Ω–µ–Ω–∞ –≤–∞–∂–Ω–æ—Å—Ç, `std::forward_list`-a –µ –º–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥—è—â–∞ –∑–∞ –Ω–∞—Å —Å—Ç—Ä—É–∫—Ç—É—Ä–∞. 

> [!NOTE]
> –ò–Ω—Ç–µ—Ä–µ—Å–µ–Ω —Ñ–∞–∫—Ç –∑–∞ –Ω–µ—è –µ, —á–µ –∏–º–∞ *sentinel* –≤ –Ω–∞—á–∞–ª–æ—Ç–æ, –∫–æ–π—Ç–æ —Å–µ –Ω–∞–º–∏—Ä–∞ –ø—Ä–µ–¥–∏ _head –µ–ª–µ–º–µ–Ω—Ç–∞. –¢–æ–π –æ—Å–∏–≥—É—Ä—è–≤–∞ —Å–∏–≥—É—Ä–Ω–æ—Å—Ç—Ç–∞, —á–µ –≤—Å–µ–∫–∏ –µ–ª–µ–º–µ–Ω—Ç –æ—Ç —Å–ø–∏—Å—ä–∫–∞ —Å–∏ –∏–º–∞ –ø—Ä–µ–¥—à–µ—Å—Ç–≤–µ–Ω–∏–∫. –ü–æ–º–∞–≥–∞ –∑–∞ –ø–æ-–ª–µ—Å–Ω–æ—Ç–æ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ –Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∫–∞—Ç–æ `push_front`, `pop_front`, `emplace_front` –∏ —Ç.–Ω. –ú–µ—Ç–æ–¥—ä—Ç `before_begin()` –≤—Ä—ä—â–∞ –∏—Ç–µ—Ä–∞—Ç–æ—Ä –∫—ä–º –Ω–µ–≥–æ.


## –î–≤—É—Å–≤—ä—Ä–∑–∞–Ω —Å–ø–∏—Å—ä–∫
<img width="475" alt="image" src="https://github.com/user-attachments/assets/ac7e2d2d-07a8-420f-b3d4-b24fd7bcbbc8">


–î–≤—É—Å–≤—ä—Ä–∑–∞–Ω–∏—è—Ç —Å–ø–∏—Å—ä–∫ —Å—ä—â–æ –µ —Ç–µ–º–ø–ª–µ–π—Ç–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç –¥–∞–Ω–Ω–∏, —Å—ä—Å—Ç–∞–≤–µ–Ω–∞ —Å—ä—â–æ –æ—Ç Node-–æ–≤–µ. –¢—É–∫ –æ–±–∞—á–µ —Ç–µ –∏–º–∞—Ç –∏ –µ–¥–∏–Ω –¥–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–µ–Ω —É–∫–∞–∑–∞—Ç–µ–ª, —Å–æ—á–µ—â –∫—ä–º –ø—Ä–µ–¥—Ö–æ–¥–Ω–∏—è –µ–ª–µ–º–µ–Ω—Ç:
```c++
template <class T>
struct node
{
	node<T>* _next;
	node<T>* _prev;
	T _value;

	node() : _next{ nullptr }, _prev{ nullptr }, _value() {}
	node(const T& value) : _next{ nullptr }, _prev{ nullptr }, _value(value) {}
	node(T&& value) : _next{ nullptr }, _prev{ nullptr }, _value(std::move(value)) {}

	template <class ...Args>
	node(Args&& ...args) : _next{ nullptr }, _prev{ nullptr }, _value(std::forward<Args>(args)...) {}

};
```
–¢—É–∫ –æ—Ç–Ω–æ–≤–æ –Ω—è–º–∞–º–µ ***locality*** –∏ –ø–∞–∑–∏–º —Ç–æ—á–Ω–æ—Ç–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞–º–µ—Ç, –∫–æ–µ—Ç–æ –Ω–∏ –µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ. 

–ê–∫–æ —Å–µ –≤—ä—Ä–Ω–µ–º –Ω–∞ –ø—Ä–∏–º–µ—Ä–∞ —Å—ä—Å —Å—Ç–∞–∏—Ç–µ, —Ç—É–∫ –≤–µ—á–µ –Ω–∏ –µ –ø–æ–∑–≤–æ–ª–µ–Ω–æ –¥–∞ —Å–µ –≤—ä—Ä–Ω–µ–º –≤ –ø—Ä–µ–¥–∏—à–Ω–∞—Ç–∞, —Ç.–µ. –æ—Ç –∑–∞–ª–∞ 01 –æ—Ç–∏–≤–∞–º–µ –≤ –∑–∞–ª–∞ 325, –Ω–æ –≤ 325 –∏–º–∞–º–µ –Ω–æ–≤–æ –ª–∏—Å—Ç—á–µ, –Ω–∞ –∫–æ–µ—Ç–æ –ø–∏—à–µ "–∑–∞–ª–∞ ‚Ññ01". –°—ä–æ—Ç–≤–µ—Ç–Ω–æ –≤ –∑–∞–ª–∞ 200 –∏–º–∞–º–µ –ª–∏—Å—Ç—á–µ, –Ω–∞ –∫–æ–µ—Ç–æ –ø–∏—à–µ "–∑–∞–ª–∞ ‚Ññ325". –ê–∫–æ —Ç—Ä—è–±–≤–∞ –¥–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏–º —Å–ø–∏—Å—ä–∫–∞ —Ç—É–∫, —Ç–æ–π —â–µ –∏–∑–≥–ª–µ–∂–¥–∞ —Ç–∞–∫–∞: 01 <-> 325 <-> 200. 

–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—Ç–∞ –∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞ –¥–≤—É—Å–≤—ä—Ä–∑–∞–Ω–∏—è —Å–ø–∏—Å—ä–∫ `std::list` –µ –¥–æ—Å—Ç–∞ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–∞. –ë–∏—Ö–º–µ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏–ª–∏, —á–µ –ø–∞–∑–∏ —É–∫–∞–∑–∞—Ç–µ–ª–∏ –∫—ä–º –ø—ä—Ä–≤–∏—è –µ–ª–µ–º–µ–Ω—Ç, –∫—ä–º –ø–æ—Å–ª–µ–¥–Ω–∏—è, –∏–ª–∏ –ø—ä–∫ —Å–∞–º–æ –∫—ä–º –ø—ä—Ä–≤–∏—è –µ–ª–µ–º–µ–Ω—Ç. –í—Å—ä—â–Ω–æ—Å—Ç —Å–µ –æ–∫–∞–∑–≤–∞, —á–µ –≤ `std::list`-a –ø–∞–∑–∏–º —Å–∞–º–æ –µ–¥–∏–Ω —É–∫–∞–∑–∞—Ç–µ–ª. –¢–æ–∑–∏ —É–∫–∞–∑–∞—Ç–µ–ª –æ–±–∞—á–µ –Ω–µ —Å–æ—á–∏ –Ω–∏—Ç–æ –∫—ä–º –ø—ä—Ä–≤–∏—è, –Ω–∏—Ç–æ –∫—ä–º –ø–æ—Å–ª–µ–¥–Ω–∏—è –µ–ª–µ–º–µ–Ω—Ç –Ω–∞ —Å–ø–∏—Å—ä–∫–∞. –î–æ–±—Ä–µ, —Ç–æ–≥–∞–≤–∞ –Ω–∞–∫—ä–¥–µ —Å–æ—á–∏?

–ü–æ–¥–æ–±–Ω–æ –Ω–∞ –µ–¥–Ω–æ—Å–≤—ä—Ä–∑–∞–Ω–∏—è —Å–ø–∏—Å—ä–∫, —Ç—É–∫ —Å—ä—â–æ –∏–º–∞–º–µ **sentinel node** –∏ —É–∫–∞–∑–∞—Ç–µ–ª—è, –∫–æ–π—Ç–æ –ø–∞–∑–∏–º, —Å–æ—á–∏ –∏–º–µ–Ω–Ω–æ –∫—ä–º –Ω–µ–≥–æ. –£–∫–∞–∑–∞—Ç–µ–ª—è—Ç –∫—ä–º —Å–ª–µ–¥–≤–∞—â–∏—è –º—É –µ–ª–µ–º–µ–Ω—Ç (_sentinel->_next) —Å–æ—á–∏ –∫—ä–º –ø—ä—Ä–≤–∏—è –µ–ª–µ–º–µ–Ω—Ç –Ω–∞ —Å–ø–∏—Å—ä–∫–∞, –∞ —Ç–æ–∑–∏ –∫—ä–º –ø—Ä–µ–¥–∏—à–Ω–∏—è (-sentinel->_prev) - –∫—ä–º –ø–æ—Å–ª–µ–¥–Ω–∏—è –µ–ª–µ–º–µ–Ω—Ç –æ—Ç —Å–ø–∏—Å—ä–∫–∞. –ö–∞–∫–≤–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–∏ –¥–∞–≤–∞ —Ç–æ–≤–∞? –ß–µ –¥–≤—É—Å–≤—ä—Ä–∑–∞–Ω–∏—è—Ç —Å–ø–∏—Å—ä–∫ –µ –∏–º–ø–ª–µ–º–µ–Ω—Ç–∏—Ä–∞–Ω —Ü–∏–∫–ª–∏—á–Ω–æ. Sentinel node-a –≤–∏–Ω–∞–≥–∏ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞ –∏ –µ –≤–∞–ª–∏–¥–µ–Ω. –ü–æ —Ç–æ–∑–∏ –Ω–∞—á–∏–Ω —Å–µ –æ—Å–∏–≥—É—Ä—è–≤–∞ –ø–æ-–ª–µ—Å–Ω–æ –¥–æ–±–∞–≤—è–Ω–µ –≤ –Ω–∞—á–∞–ª–æ—Ç–æ –∏ –≤ –∫—Ä–∞—è –Ω–∞ —Å–ø–∏—Å—ä–∫–∞ –±–µ–∑ –¥–∞ –Ω–∏ —Å–µ –Ω–∞–ª–∞–≥–∞ –¥–∞ —Å–ª–µ–¥–∏–º _head –∏ _tail —É–∫–∞–∑–∞—Ç–µ–ª–∏—Ç–µ –¥–∞–ª–∏ —Å–∞ –ø—Ä–∞–≤–∏–ª–Ω–æ –Ω–∞—Å–æ—á–µ–Ω–∏. –û—Å–≤–µ–Ω —Ç–æ–≤–∞ –Ω–∏ —Å–ø–µ—Å—Ç—è–≤–∞ –ø–∞–º–µ—Ç. 

–î—Ä—É–≥ –∏–Ω—Ç–µ—Ä–µ—Å–µ–Ω —Ñ–∞–∫—Ç –∑–∞ –¥–≤—É—Å–≤—ä—Ä–∑–∞–Ω–∏—è —Å–ø–∏—Å—ä–∫ –µ, —á–µ –ø–∞–∑–∏ –≤ —Å–µ–±–µ —Å–∏ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∞ –∑–∞ size-a. –°—ä–æ—Ç–≤–µ—Ç–Ω–æ, –∞–∫–æ –∑–∞ –¥–∞ –Ω–∞–º–µ—Ä–∏–º size-a –Ω–∞ –µ–¥–Ω–æ—Å–≤—ä—Ä–∑–∞–Ω —Å–ø–∏—Å—ä–∫, —Ç—Ä—è–±–≤–∞ –¥–∞ –≥–æ –æ–±—Ö–æ–¥–∏–º —Ü–µ–ª–∏—è, –∫–æ–µ—Ç–æ –Ω–∞–ª–∞–≥–∞ –∏–∑–≤—ä—Ä—à–≤–∞–Ω–µ –Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏—è—Ç–∞ –≤ –ª–∏–Ω–µ–π–Ω–æ –≤—Ä–µ–º–µ, —Ç–æ –ø—Ä–∏ –¥–≤—É—Å–≤—ä—Ä–∑–∞–Ω–∏—è—Ç —Å–ø–∏—Å—ä–∫ —Ç–æ–≤–∞ —Å—Ç–∞–≤–∞ –≤ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–Ω–æ –≤—Ä–µ–º–µ –û(1). 

–û–ø–µ—Ä–∞—Ü–∏—è—Ç–∞ `insert` —Ç—É–∫ –æ—Ç–Ω–æ–≤–æ –µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–Ω–∞ –∫–∞—Ç–æ —Å–ª–æ–∂–Ω–æ—Å—Ç, –ø–æ–Ω–µ–∂–µ –º–µ—Ç–æ–¥–∞ –æ—Ç–Ω–æ–≤–æ –ø—Ä–∏–µ–º–∞ iterator –∫—ä–º –ø–æ–∑–∏—Ü–∏—è—Ç–∞, –Ω–∞ –∫–æ—è—Ç–æ —Ç—Ä—è–±–≤–∞ –¥–∞ insert-–Ω–µ–º –µ–ª–µ–º–µ–Ω—Ç–∞. –¢—É–∫ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–∏—Ç–µ —Ä–∞–∑–ª–∏–∫–∏ —Å –µ–¥–Ω–æ—Å–≤—ä—Ä–∑–∞–Ω–∏—è —Å–ø–∏—Å—ä–∫ —Å–∞, —á–µ –Ω–∏ —Å–µ –Ω–∞–ª–∞–≥–∞ –¥–∞ "—Ä–∞–∑–∫–∞—á–∞–º–µ" –∏ "–∑–∞–∫–∞—á–∞–º–µ" –∏ **_prev**-—É–∫–∞–∑–∞—Ç–µ–ª—á–µ—Ç–∞—Ç–∞, –∞ –∏ –µ–ª–µ–º–µ–Ω—Ç–∞ —Å–µ –≤–º—ä–∫–≤–∞ –Ω–∞ –ø–æ–∑–∏—Ü–∏—è—Ç–∞ **–ø—Ä–µ–¥–∏** –ø–æ–¥–∞–¥–µ–Ω–∞—Ç–∞ –∫–∞—Ç–æ –∞—Ä–≥—É–º–µ–Ω—Ç:

```c++
template <class T>
iterator<T> list<T>::insert(const iterator<T>& pos, const T& el)
{
	if (!pos._node_ptr)
		throw std::runtime_error("Invalid iterator");

	if (pos == begin())
	{
		push_front(el);
		return begin();
	}

	if (pos == (end() - 1))
	{
		push_back(el);
		return end();
	}

	node<T>* to_insert = new node<T>(el);
	node<T>* curr = pos._node_ptr;
	node<T>* prev = pos._node_ptr->_prev; // prev keeps previous node

	curr->_prev = to_insert; // we insert to_insert before curr
	to_insert->_next = curr; // attaching to_insert to curr
	prev->_next = to_insert; // we attached to_insert to prev node
	to_insert->_prev = prev; // we attached previous node to to_insert

	_size++;

	return pos;
}
```

–ü—Ä–∏ –¥–≤—É—Å–≤—ä—Ä–∑–∞–Ω–∏—è —Å–ø–∏—Å—ä–∫ –∏–º–∞–º–µ —Å—ä—â–æ –º–µ—Ç–æ–¥–∞ `splice`, –∫–æ–π—Ç–æ –æ—Ç–Ω–æ–≤–æ –Ω–∏ –ø–æ–∑–≤–æ–ª—è–≤–∞ –¥–∞ –≤–º—ä–∫–Ω–µ–º –¥—Ä—É–≥ —Å–≤—ä—Ä–∑–∞–Ω —Å–ø–∏—Å—ä–∫ –≤ –Ω–∞—à–∏—è –≤ **–∫–æ–Ω—Å—Ç–∞–Ω—Ç–Ω–æ –≤—Ä–µ–º–µ –û(1)**. –û—Ç–Ω–æ–≤–æ, —Ä–∞–∑–ª–∏–∫–∏—Ç–µ —Å –µ–¥–Ω–æ—Å–≤—ä—Ä–∑–∞–Ω–∏—è —Å–ø–∏—Å—ä–∫ —Å–∞, —á–µ –Ω–∏ —Å–µ –Ω–∞–ª–∞–≥–∞ –¥–∞ "—Ä–∞–∑–∫–∞—á–∞–º–µ" –∏ "–∑–∞–∫–∞—á–∞–º–µ" –∏ **_prev**-—É–∫–∞–∑–∞—Ç–µ–ª—á–µ—Ç–∞—Ç–∞, –∞ –∏ –µ–ª–µ–º–µ–Ω—Ç–∞ —Å–µ –≤–º—ä–∫–≤–∞ –Ω–∞ –ø–æ–∑–∏—Ü–∏—è—Ç–∞ **–ø—Ä–µ–¥–∏** –ø–æ–¥–∞–¥–µ–Ω–∞—Ç–∞ –∫–∞—Ç–æ –∞—Ä–≥—É–º–µ–Ω—Ç:
```c++
template <class T>
void list<T>::splice(const iterator<T>& pos, list<T>& other)
{
	if (!pos._node_ptr || !other.size())
		return;

	auto other_h = other._sentinel->_next;
	auto other_t = other._sentinel->_prev;
	other._sentinel->_next = other._sentinel->_prev = nullptr;
	other._size = 0;

	auto curr = pos._node_ptr;
	auto prev = curr->_prev;

	prev->_next = other_h;
	other_h->_prev = prev; // now we attached prev to other`s head

	curr->_prev = other_t;
	other_t->_next = curr; // now we attached curr to other`s tail

	_size += other._size;
}
```

–ü—Ä–µ–º–∞—Ö–≤–∞–Ω–µ—Ç–æ –Ω–∞ –µ–ª–µ–º–µ–Ω—Ç –æ—Ç–Ω–æ–≤–æ –µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–Ω–æ, –∫–∞—Ç–æ –∞–∫–æ –∏–º–∞–º–µ –ø–æ–¥–∞–¥–µ–Ω–∞ –ø–æ–∑–∏—Ü–∏—è, —Ç–æ –ø—Ä–µ–º–∞—Ö–≤–∞–º–µ –µ–ª–µ–º–µ—Ç–∞ **–ø—Ä–µ–¥–∏** –Ω–µ—è: 
```c++
template <class T>
iterator<T> list<T>::erase(const iterator<T>& pos)
{
	if (!pos._node_ptr)
		throw std::runtime_error("Invalid iter");

	if (pos == begin())
	{
		pop_front();
		return begin();
	}

	if (pos == --end())
	{
		pop_back();
		return end();
	}

	node<T>* prev = pos._node_ptr->_prev;
	node<T>* next = pos._node_ptr->_next;
	node<T>* curr = pos._node_ptr;

	prev->_next = next;
	next->_prev = prev;

	delete curr;

	_size--;

	return { next };
}
```

–¢—É–∫, –∫–∞–∫—Ç–æ –∑–∞–±–µ–ª—è–∑–≤–∞–º–µ, –Ω—è–º–∞–º–µ –Ω—É–∂–¥–∞ –¥–∞ –≥–ª–µ–¥–∞–º–µ –¥–∞–ª–∏ —Ç—Ä–∏–µ–º (–¥–æ–±–∞–≤—è–º–µ) –µ–ª–µ–º–µ–Ω—Ç –Ω–∞ —Å–µ–≥–∞—à–Ω–∞—Ç–∞, –ø—Ä–µ–¥—Ö–æ–¥–Ω–∞—Ç–∞ –∏–ª–∏ —Å–ª–µ–¥–≤–∞—â–∞—Ç–∞ –ø–æ–∑–∏—Ü–∏—è. –ü—Ä–∏—á–∏–Ω–∞—Ç–∞ –µ, —á–µ –∏–º–∞–º–µ –∞–¥—Ä–µ—Å–∏—Ç–µ –∫–∞–∫—Ç–æ –Ω–∞ —Å–ª–µ–¥–≤–∞—â–∏—Ç–µ, —Ç–∞–∫–∞ –∏ –Ω–∞ –ø—Ä–µ–¥—Ö–æ–¥–Ω–∏—Ç–µ –µ–ª–µ–º–µ–Ω—Ç–∏ –Ω–∞ –¥–∞–¥–µ–Ω –≤—ä–∑–µ–ª.

> [!IMPORTANT]
> –ò –ø—Ä–∏ –¥–≤–∞—Ç–∞ —Å–ø–∏—Å—ä–∫–∞ –Ω–∞–º–∏—Ä–∞–Ω–µ—Ç–æ –Ω–∞ –¥–∞–¥–µ–Ω –µ–ª–µ–º–µ–Ω—Ç —Å—Ç–∞–≤–∞ –≤ –ª–∏–Ω–µ–π–Ω–æ –≤—Ä–µ–º–µ –û(n). –ù—è–º–∞–º–µ –¥–æ—Å—Ç—ä–ø —Å –ø—Ä—è–∫–∞ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è, –∫–∞–∫—Ç–æ –ø—Ä–∏ –≤–µ–∫—Ç–æ—Ä–∞. –î–æ—Å—Ç—ä–ø–∞ –¥–æ –µ–ª–µ–º–µ–Ω—Ç–∏ —Å–µ –æ—Å—ä—â–µ—Å—Ç–≤–≤—è–≤–∞ —á—Ä–µ–∑ **–∏—Ç–µ—Ä–∞—Ç–æ—Ä–∏**. 

–°—ä–æ—Ç–≤–µ—Ç–Ω–æ, –∞–∫–æ —Ç—Ä—è–±–≤–∞ –¥–∞ –Ω–∞–ø—Ä–∞–≤–∏–º –ø–∞—Ä–∞–ª–µ–ª –º–µ–∂–¥—É –¥–≤–∞—Ç–∞ —Å–ø–∏—Å—ä–∫–∞, –º–æ–∂–µ–º –¥–∞ –æ–±–æ–±—â–∏–º —Å–ª–µ–¥–Ω–æ—Ç–æ:
- –ï–¥–Ω–æ—Å–≤—ä—Ä–∑–∞–Ω–∏—è—Ç —Å–ø–∏—Å—ä–∫ –µ –ø–æ-–ª–µ—Å–µ–Ω –∑–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏ –∏–∑–ø–æ–ª–∑–≤–∞ –ø–æ-–º–∞–ª–∫–æ –ø–∞–º–µ—Ç, –Ω–æ –µ –ø–æ-–æ–≥—Ä–∞–Ω–∏—á–µ–Ω –æ—Ç–∫—ä–º –Ω–∞–≤–∏–≥–∞—Ü–∏—è –∏ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç –ø—Ä–∏ –¥–æ–±–∞–≤—è–Ω–µ –∏ –∏–∑—Ç—Ä–∏–≤–∞–Ω–µ –Ω–∞ –µ–ª–µ–º–µ–Ω—Ç–∏ - –≤–∏–Ω–∞–≥–∏ –¥–æ–±–∞–≤—è–º–µ –∏ —Ç—Ä–∏–µ–º –µ–ª–µ–º–µ–Ω—Ç–∞ —Å–ª–µ–¥ –ø–æ–¥–∞–¥–µ–Ω–∞—Ç–∞ –ø–æ–∑–∏—Ü–∏—è. 
- –î–≤—É—Å–≤—ä—Ä–∑–∞–Ω–∏—è—Ç —Å–ø–∏—Å—ä–∫ –ø—Ä–µ–¥–ª–∞–≥–∞ –ø–æ-–≥–æ–ª—è–º–∞ –≥—ä–≤–∫–∞–≤–æ—Å—Ç –ø—Ä–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—è –∏ –µ –ø–æ-–µ—Ñ–µ–∫—Ç–∏–≤–µ–Ω –ø—Ä–∏ –∏–∑—Ç—Ä–∏–≤–∞–Ω–µ, –Ω–æ –µ –ø–æ-—Å–ª–æ–∂–µ–Ω –∑–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏ –∑–∞–µ–º–∞ –ø–æ–≤–µ—á–µ –ø–∞–º–µ—Ç.

–í –æ–±—â–∏—è —Å–ª—É—á–∞–π —â–µ –Ω–∏ —Å–µ –Ω–∞–ª–∞–≥–∞ –¥–∞ –ø–æ–ª–∑–≤–∞–º–µ `std::list`, –Ω–æ –∏–∑–±–æ—Ä—ä—Ç –º–µ–∂–¥—É –¥–≤–µ—Ç–µ –∑–∞–≤–∏—Å–∏ –º–Ω–æ–≥–æ –æ—Ç –∏–∑–∏—Å–∫–≤–∞–Ω–∏—è—Ç–∞ –æ—Ç–∫—ä–º –ø–∞–º–µ—Ç –∏ –±—ä—Ä–∑–∏–Ω–∞ –Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏—Ç–µ. 

---
# –ó–∞–¥–∞—á–∏ üåª
- [**Reverse a linked list**](https://www.hackerrank.com/challenges/reverse-a-linked-list/problem)
- [**Cycle Detection**](https://www.hackerrank.com/challenges/detect-whether-a-linked-list-contains-a-cycle/problem)
- [**Intersection of two linked lists**](https://leetcode.com/problems/intersection-of-two-linked-lists/description/)
- [**–ó–∞–º–µ—Å—Ç–≤–∞–Ω–µ –Ω–∞ –µ–ª–µ–º–µ–Ω—Ç 1**](https://www.hackerrank.com/contests/sda-test-2022-2023-wdfgs/challenges/challenge-3729/problem)
- [**–ó–∞–º–µ—Å—Ç–≤–∞–Ω–µ –Ω–∞ –µ–ª–µ–º–µ–Ω—Ç 2**](https://www.hackerrank.com/contests/sda-test-2022-2023-wdfgs/challenges/challenge-3730/problem)
